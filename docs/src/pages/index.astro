---
import Base from '../layouts/Base.astro';
import Terminal from '../components/Terminal.astro';
import { Code } from 'astro:components';

const base = import.meta.env.BASE_URL.replace(/\/$/, '');
---

<Base title="Home" description="Task tracking for LLM workflows. Persistent memory for complex, multi-session work.">
  <div class="hero">
    <p class="tagline">Task tracking for LLM workflows</p>
    <p class="tagline">Persistent memory for complex, multi-session work</p>

    <div class="hero-prompt">
      <div class="prompt-box">
        <span class="prompt-caret">&gt;</span>
        <span class="prompt-text">Use Dex. Work on the next logical task. When done, run code-simplifier and commit.</span>
      </div>
    </div>

    <div class="cta-buttons">
      <a href={`${base}/install`} class="btn btn-primary">Get Started</a>
    </div>
  </div>

  <section class="section">
    <h2>Quick Start</h2>
    <p>Install the dex skill for Claude Code:</p>
    <Terminal title="Terminal">
      <Code
        code={`claude plugin marketplace add dcramer/dex
claude plugin install dex@dex`}
        lang="bash"
        theme="vitesse-black"
      />
    </Terminal>
    <p>Restart Claude Code, then use <code>/dex</code> to manage tasks.</p>
  </section>

  <section class="section">
    <h2>When to use dex</h2>
    <div class="feature-grid">
      <div class="feature">
        <h3>Large refactors</h3>
        <p>Break down a migration into tracked steps. Pick up exactly where you left off, even across sessions.</p>
      </div>
      <div class="feature">
        <h3>Multi-step features</h3>
        <p>Plan the work, track what's done, and record decisions made along the way.</p>
      </div>
      <div class="feature">
        <h3>Context handoff</h3>
        <p>Document findings and progress so future sessions (or teammates) can continue seamlessly.</p>
      </div>
      <div class="feature">
        <h3>Complex debugging</h3>
        <p>Track hypotheses, record what you've tried, and build up knowledge as you investigate.</p>
      </div>
    </div>
  </section>
</Base>

<style>
  .hero-prompt {
    max-width: 100%;
    margin: 2rem 0;
  }

  .prompt-box {
    font-family: var(--font-mono);
    font-size: 1rem;
    line-height: 1.6;
    text-align: left;
    display: flex;
    align-items: baseline;
    justify-content: center;
  }

  .prompt-caret {
    color: var(--text);
    margin-right: 0.5rem;
    flex-shrink: 0;
  }

  .prompt-text {
    color: var(--text);
    overflow: hidden;
    white-space: nowrap;
    border-right: 2px solid var(--text);
    width: 0;
    animation:
      typewriter 2.5s steps(80) 0.5s forwards,
      blink 0.75s step-end infinite;
  }

  @keyframes typewriter {
    to {
      width: 100%;
    }
  }

  @keyframes blink {
    50% {
      border-color: transparent;
    }
  }
</style>
