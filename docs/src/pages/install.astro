---
import Base from '../layouts/Base.astro';
import Terminal from '../components/Terminal.astro';
---

<Base title="Install" description="Install dex for Claude Code and CLI">
  <h1>Installation</h1>

  <h2>Claude Code</h2>
  <p>Install the dex plugin from the Claude Code marketplace:</p>
  <Terminal title="Terminal" showCopy={true}>
    <pre class="cli-output"><span class="cli-dim">$</span> claude plugin marketplace add dcramer/dex
<span class="cli-dim">$</span> claude plugin install dex@dex</pre>
  </Terminal>
  <p>The <code>/dex</code> skill will be available immediately.</p>

  <h2>Using add-skill</h2>
  <p>If you use <a href="https://add-skill.org/">add-skill</a> for installing agent skills:</p>
  <Terminal title="Terminal" showCopy={true}>
    <pre class="cli-output"><span class="cli-dim">$</span> npx add-skill dcramer/dex</pre>
  </Terminal>

  <h2>CLI Only</h2>
  <p>Install the CLI globally for standalone use or faster execution:</p>
  <Terminal title="Terminal" showCopy={true}>
    <pre class="cli-output"><span class="cli-dim">$</span> npm install -g @zeeg/dex</pre>
  </Terminal>
  <p>This is optional if using Claude Code, which runs via <code>npx</code> by default.</p>

  <h2>Shell Completions</h2>
  <p>Enable tab completion for dex commands and task IDs.</p>

  <h3>Bash</h3>
  <p>Add to <code>~/.bashrc</code>:</p>
  <Terminal title="~/.bashrc" showCopy={true}>
    <pre class="cli-output">eval "$(dex completion bash)"</pre>
  </Terminal>

  <h3>Zsh</h3>
  <p>Add to <code>~/.zshrc</code> (after compinit):</p>
  <Terminal title="~/.zshrc" showCopy={true}>
    <pre class="cli-output">eval "$(dex completion zsh)"</pre>
  </Terminal>

  <h3>Fish</h3>
  <p>Add to <code>~/.config/fish/config.fish</code>:</p>
  <Terminal title="config.fish" showCopy={true}>
    <pre class="cli-output">dex completion fish | source</pre>
  </Terminal>

</Base>

<style>
  .cli-output {
    font-family: var(--font-mono);
    font-size: 0.875rem;
    line-height: 1.6;
    color: #e5e5e5;
    margin: 0;
    white-space: pre-wrap;
    word-break: break-word;
  }

  .cli-dim {
    color: #737373;
  }
</style>
