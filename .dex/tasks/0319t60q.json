{
  "id": "0319t60q",
  "parent_id": null,
  "description": "Add storage engine abstraction and config file support",
  "context": "Add support for multiple storage backends (file, GitHub Issues, GitHub Projects v2) with system-wide configuration.\n\nRequirements:\n- Create StorageEngine interface that file/GitHub backends implement\n- Add TOML config file support (~/.config/dex/dex.toml)\n- Config should specify engine type and engine-specific settings\n- Maintain backward compatibility with current file storage\n- Config loading priority: CLI flags > env vars > config file > auto-detect\n\nImplementation approach:\n1. Create StorageEngine interface (read/write/getPath)\n2. Refactor TaskStorage → FileStorage implementing interface\n3. Add TOML config loading (use a TOML parser library)\n4. Update index.ts and TaskService to accept engine parameter\n5. Add config file to .gitignore\n\nDone when:\n- StorageEngine interface exists\n- FileStorage implements it\n- Config file loads and selects engine\n- All existing tests pass\n- Can specify engine via config\n\nRelated: src/core/storage.ts, src/core/task-service.ts, src/index.ts",
  "priority": 1,
  "status": "completed",
  "result": "Completed storage engine abstraction and config system:\n\nSubtasks completed:\n1. Created StorageEngine interface (read/write/getIdentifier)\n2. Refactored TaskStorage → FileStorage implementing interface\n3. Added TOML config file loading (smol-toml, ~/.config/dex/dex.toml)\n4. Wired config into index.ts, MCP server, and CLI\n\nKey features:\n- Pluggable storage backends via interface\n- Config determines engine type (file/github-issues/github-projects)\n- 'dex init' command generates default config\n- Priority: config engine > CLI flag > config path > env var > auto-detect\n- Backward compatible (TaskStorage alias, getPath() method)\n\nImplementation:\n- src/core/storage-engine.ts: Interface definition\n- src/core/storage.ts: FileStorage (renamed from TaskStorage)\n- src/core/config.ts: TOML loading, XDG_CONFIG_HOME support\n- src/index.ts: createStorageEngine() with priority logic\n- src/cli/commands.ts: initCommand() for setup\n- tests/config.test.ts: 9 new tests for config loading\n\nAll 69 tests passing. Ready for GitHub Issues and Projects v2 implementations.",
  "created_at": "2026-01-22T19:59:11.178Z",
  "updated_at": "2026-01-22T20:13:16.785Z",
  "completed_at": "2026-01-22T20:13:16.785Z"
}